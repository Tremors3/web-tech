{% extends 'base/base_column.html' %}
{% load static %}
{% load custom_filters %}

{% block navbar %} {% include 'accounts/includes/profile_navbar.html' %} {% endblock %}

{% block title %}Your Profile | Graba{% endblock %}

{% block main_column %}
<div class="d-flex flex-column align-items-center gap-4 pt-5">


    <!-- FIRST SECTION: Profile Info -->
    <div class="card bg-white rounded shadow pt-4 px-4 w-100">

        <h2 class="text-center mb-4">Profile Info</h2>

        <!-- PROFILE INFO - GRID -->
        <div class="row">
            
            <!-- LEFT COLUMN -->
            <div class="col-md-6 d-flex flex-column gap-3 mb-3">

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Username:</strong>
                    <span>{{ profile_user.username }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Email:</strong>
                    <span>{{ profile_user.email }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Bio:</strong>
                    <span>{{ profile_user.bio }}</span>
                </div>

                {% if profile_user.legal_type == "PRIVATE" %}
                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Full Name:</strong>
                    <span>{{ profile_user.first_name }} {{ profile_user.last_name }}</span>
                </div>
                {% endif %}
            </div>

            <!-- RIGHT COLUMN -->
            <div class="col-md-6 d-flex flex-column gap-3 mb-3">

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Member Since:</strong>
                    <span>{{ profile_user.registration_date|date }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">User Status:</strong>
                    <span>{{ profile_user.state }}</span>
                </div>
            </div>
        </div> <!-- END GRID -->

        <!-- SHOPKEEPER SECTION UNDER THE GRID -->
        {% if profile_user.legal_type == "SHOPKEEPER" %}
            <hr>
            
            <div class="col-md-6 d-flex flex-column gap-3 mb-3">
                <h5>Shopkeeper Info</h5>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Business Name:</strong>
                    <span>{{ profile_user.shopkeeper.business_name }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">Headquarters:</strong>
                    <span>{{ profile_user.shopkeeper.headquarters_address }}</span>
                </div>

                <div class="d-flex align-items-center">
                    <strong class="me-3" style="width: 150px;">VAT Number:</strong>
                    <span>{{ profile_user.shopkeeper.iva_number }}</span>
                </div>
            </div>
        {% endif %}

    </div>


    <!-- SECOND SECTION: Vendor Auctions -->
    {% if auc_page_obj %}
        {% if request.user.is_authenticated and profile_user.id == request.user.id %}
            {% with "Your Auctions" as auctions_title %}
                {% include "partials/auction_grid.html" with request=request page_obj=auc_page_obj title=auctions_title querystring=querystring user_favorites=user_favorites %}
            {% endwith %}
        {% else %}
            {% with "Seller Auctions" as auctions_title %}
                {% include "partials/auction_grid.html" with request=request page_obj=auc_page_obj title=auctions_title querystring=querystring user_favorites=user_favorites %}
            {% endwith %}
        {% endif %}
    {% endif %}


    <!-- THIRD SECTION: Favorites -->
    {% if request.user.is_authenticated and profile_user.id == request.user.id %}
        {% if fav_page_obj %}
            {% include "partials/auction_grid.html" with request=request page_obj=fav_page_obj title="Favorite Auctions" querystring=querystring user_favorites=user_favorites only %}
        {% endif %}
    {% endif %}


    <!-- FOURTH SECTION: Vendor Reviews -->
    <div class="card bg-white rounded shadow pt-4 px-4 w-100">
        <h2 class="text-center">Reviews</h2>
    </div>

</div>
{% endblock %}

{% block extra_js %}{% endblock %}